---
title: Frontmatter Specification
description: YAML frontmatter format for Calvin PromptPack source files
---

# Frontmatter Specification

> Source Format: 1.0 | Updated: 2025-12-27

Calvin parses **YAML frontmatter** between `---` delimiters. Frontmatter is required for:

- `.promptpack/actions/**/*.md`
- `.promptpack/policies/**/*.md`
- `.promptpack/agents/**/*.md`
- `.promptpack/skills/<id>/SKILL.md` (skills entrypoint)

Skill **supplemental files** (anything else under `.promptpack/skills/<id>/`) do not need frontmatter and are copied as-is to outputs.

## Minimal Example

```markdown
---
description: Generate unit tests for a file
scope: project
targets: [claude-code, cursor]
---

# Generate Tests

Your prompt content here...
```

## Required Fields

### `description`

**Type**: `string`  
**Required**: Yes

A short description of the asset. Used by adapters for metadata (titles, summaries, listings).

```yaml
description: Code style guidelines for TypeScript
```

## Optional Fields

### `kind`

**Type**: `"action"` | `"policy"` | `"agent"` | `"skill"`  
**Default**: inferred from directory (or `action`)

Usually inferred from directory:

| Location | Inferred kind |
|---|---|
| `.promptpack/actions/` | `action` |
| `.promptpack/policies/` | `policy` |
| `.promptpack/agents/` | `agent` |
| `.promptpack/skills/<id>/SKILL.md` | `skill` |

Notes:

- In `.promptpack/skills/<id>/SKILL.md`, `kind: skill` is optional. If present, it must be `skill`.
- Skills and actions can share the same id without conflict (different directories).

```yaml
kind: policy
```

### `scope`

**Type**: `"project"` | `"user"`  
**Default**: `"project"`

Controls where outputs are deployed:

- `project`: write to project directories (e.g., `./.claude/`, `./.codex/`)
- `user`: write to home directories (e.g., `~/.claude/`, `~/.codex/`)

```yaml
scope: user
```

### `targets`

**Type**: `string[]`  
**Default**: all targets

List of platforms to compile for:

- `claude-code`
- `cursor`
- `vscode`
- `antigravity`
- `codex`
- `opencode`
- `all` (meta-target that expands to all concrete targets)

```yaml
targets:
  - claude-code
  - cursor
```

### `apply`

**Type**: `string`  
**Default**: none

Glob pattern used by adapters that support conditional rules (primarily policies).

```yaml
apply: "**/*.rs"
```

Notes:

- Skills do **not** support `apply` (Calvin errors if present in `SKILL.md` frontmatter).
- Some targets ignore `apply`.

### `allowed-tools` (skill-only)

**Type**: `string[]` (YAML sequence)  
**Default**: none

Optional list of allowed tools for skills. Calvin validates this list and surfaces warnings for risky tools (e.g. `rm`, `sudo`, `curl`).

```yaml
allowed-tools:
  - git
  - cat
```

## Agent-Specific Fields

The following fields are only used for agents (`kind: agent`). They configure Claude Code subagent behavior.

### `name`

**Type**: `string`  
**Default**: asset ID (filename stem)

Custom name for the agent. If not specified, uses the filename (e.g., `reviewer.md` â†’ `reviewer`).

```yaml
name: code-reviewer
```

### `tools`

**Type**: `string` (comma-separated) or `string[]` (YAML list)  
**Default**: inherit all tools

Whitelist of tools this agent can use. If not specified, the agent inherits all tools from the main thread.

```yaml
tools: Read, Grep, Glob, Bash
```

Calvin also accepts the YAML list format:

```yaml
tools:
  - Read
  - Grep
  - Glob
```

For backward compatibility, the YAML list format is also accepted as `agent-tools`:

```yaml
agent-tools:
  - Read
  - Grep
  - Glob
```

### `model`

**Type**: `"sonnet"` | `"opus"` | `"haiku"` | `"inherit"`  
**Default**: none (uses default model)

Model override for this agent.

```yaml
model: sonnet
```

### `permissionMode`

**Type**: `"default"` | `"acceptEdits"` | `"dontAsk"` | `"bypassPermissions"` | `"plan"` | `"ignore"`  
**Default**: none

Controls how the agent handles permission prompts.

| Mode | Behavior |
|------|----------|
| `default` | Standard permission prompts |
| `acceptEdits` | Auto-accept file edits |
| `dontAsk` | Skip all permission prompts |
| `bypassPermissions` | Full bypass (dangerous) |
| `plan` | Planning mode only |
| `ignore` | Ignore permission system |

```yaml
permissionMode: acceptEdits
```

Calvin also accepts kebab-case as `permission-mode`:

```yaml
permission-mode: acceptEdits
```

### `skills`

**Type**: `string` (comma-separated)  
**Default**: none

Skills to preload when this agent starts. Custom subagents do NOT inherit skills from the main thread by default.

```yaml
skills: repo-navigation, engineering-standards
```

Calvin also accepts the YAML list format as `agent-skills`:

```yaml
agent-skills:
  - repo-navigation
  - engineering-standards
```

## OpenCode-Specific Fields

These fields are only used when compiling for the `opencode` target.

### `mode` (agent-only)

**Type**: `"primary"` | `"subagent"`  
**Default**: `"subagent"` (for `opencode`)

OpenCode agent execution mode.

```yaml
mode: subagent
```

### `temperature` (agent-only)

**Type**: `float` (0.0-1.0)  
**Default**: none

Model temperature for OpenCode agents.

```yaml
temperature: 0.3
```

### `opencode-model` (agent/command)

**Type**: `string`  
**Default**: none

Full OpenCode model ID override. When set, it takes precedence over `model` for OpenCode outputs.

```yaml
opencode-model: anthropic/claude-sonnet-4-5
```

### `agent` (action-only)

**Type**: `string`  
**Default**: none

For OpenCode commands: which agent to execute the command.

```yaml
agent: build
```

### `subtask` (action-only)

**Type**: `boolean`  
**Default**: none

For OpenCode commands: run in an isolated sub-session.

```yaml
subtask: false
```

## Agent Example

```markdown
---
description: Use proactively to explore the codebase and gather evidence before planning or editing.
tools: Read, Grep, Glob, Bash
model: haiku
permissionMode: default
skills: repo-navigation
---

You are a code researcher. Your job is to explore the codebase and gather evidence.

Output:
- File paths you examined
- Search keywords used
- Key findings with file references

Do NOT make any changes. Only gather information.
```

## Skill Example

```markdown
---
description: Draft a conventional commit message from staged changes.
kind: skill
scope: user
targets:
  - claude-code
  - codex
allowed-tools:
  - git
  - cat
---

# Instructions

1. Run `git diff --cached --stat`
2. Suggest a conventional commit message
3. Consult `reference.md` if needed
```

## Placeholder Variables

In the body content, you can include placeholders that are passed through to adapters:

| Placeholder | Description |
|---|---|
| `$ARGUMENTS` | All arguments as a single string (Action/Agent) |
| `$1` - `$9` | Positional arguments |

These are passed through unchanged; the target platform interprets them at runtime.

## Platform-Specific Mapping (High Level)

### Claude Code

- Actions and policies compile to `.claude/commands/<id>.md`
- **Agents** compile to `.claude/agents/<id>.md` with YAML frontmatter (see [Agent Example](#agent-example))
- Skills compile to `.claude/skills/<id>/SKILL.md` (plus supplementals)
- Agent-specific fields (`tools`, `model`, `permissionMode`, `skills`) are output in Claude Code native format

### Cursor

- Policies compile to `.cursor/rules/<id>/RULE.md`; `apply` is mapped to `globs`, and `alwaysApply` is derived.
- **Agents** compile to `.cursor/commands/<id>.md` as fallback when Claude Code is not enabled
- When both Cursor and Claude Code are enabled, agents go to `.claude/agents/` only (no Cursor fallback)
- Skills compile to `.claude/skills/<id>/SKILL.md` (Cursor reads Claude's skills path)

### VS Code (Copilot)

- Policies compile to `.github/instructions/<id>.instructions.md`; `apply` maps to `applyTo`
- **Agents** compile to `.github/instructions/<id>.instructions.md` and are listed in `AGENTS.md`
- Skills are not supported and are skipped

### Antigravity

- Policies compile to `.agent/rules/<id>.md`
- Actions and **agents** compile to `.agent/workflows/<id>.md` (Antigravity does not have native agent support)
- Skills are not supported and are skipped

### Codex

- Prompts compile to `.codex/prompts/` (project scope) or `~/.codex/prompts/` (user scope).
- Skills compile to `.codex/skills/<id>/SKILL.md` (project scope) or `~/.codex/skills/<id>/SKILL.md` (user scope).

### OpenCode

- Agents compile to `.opencode/agent/<id>.md` (project scope) or `~/.config/opencode/agent/<id>.md` (user scope).
- Actions compile to `.opencode/command/<id>.md` (project scope) or `~/.config/opencode/command/<id>.md` (user scope).
- Policies compile to `AGENTS.md` (project scope) or `~/.config/opencode/AGENTS.md` (user scope).
- Skills compile to `.opencode/skill/<id>/SKILL.md` unless Claude Code is also enabled, in which case `.claude/skills/<id>/SKILL.md` is reused.

## Validation

Calvin errors on invalid frontmatter, including:

- missing frontmatter delimiters (`---`)
- invalid YAML / invalid types (e.g., `allowed-tools` must be a list)
- missing required `description`
- invalid `kind`, `scope`, or `targets` values
- skills using unsupported fields (e.g., `apply` in `SKILL.md`)

When YAML contains `:` characters inside a string value, quote the string:

```yaml
description: "My: Rule"
```

## See Also

- [Skills](/guides/skills)
- [Library API](/api/library)
